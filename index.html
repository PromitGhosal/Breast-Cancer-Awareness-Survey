<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breast Health & Wellbeing Survey</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #D84A6B;
            --primary-dark: #B83754;
            --secondary: #2E5266;
            --accent: #F4A261;
            --bg-cream: #FFF8F3;
            --bg-white: #FFFFFF;
            --text-dark: #2C2C2C;
            --text-medium: #666666;
            --text-light: #999999;
            --border: #E5D5CC;
            --success: #52B788;
            --shadow-sm: 0 2px 8px rgba(216, 74, 107, 0.08);
            --shadow-md: 0 4px 16px rgba(216, 74, 107, 0.12);
            --shadow-lg: 0 8px 32px rgba(216, 74, 107, 0.16);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--bg-cream) 0%, #FFE8E8 100%);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .app-container {
            max-width: 900px;
            margin: 0 auto;
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Header */
        .header {
            text-align: center;
            padding: 40px 20px;
            background: var(--bg-white);
            border-radius: 24px;
            box-shadow: var(--shadow-md);
            margin-bottom: 30px;
            border: 3px solid var(--primary);
        }

        .header h1 {
            font-family: 'Crimson Pro', serif;
            font-size: clamp(28px, 5vw, 42px);
            color: var(--primary);
            font-weight: 700;
            margin-bottom: 12px;
            line-height: 1.2;
        }

        .header p {
            font-size: 16px;
            color: var(--text-medium);
            margin-bottom: 8px;
        }

        .header .stats {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .stat-badge {
            padding: 8px 16px;
            background: var(--bg-cream);
            border-radius: 20px;
            font-size: 14px;
            color: var(--text-dark);
            font-weight: 500;
        }

        /* Progress Bar */
        .progress-container {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-sm);
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            color: var(--text-medium);
        }

        .progress-bar {
            height: 12px;
            background: #F0F0F0;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);
            border-radius: 20px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px rgba(216, 74, 107, 0.3);
        }

        /* Section Container */
        .section-container {
            background: var(--bg-white);
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-md);
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .section-header {
            font-family: 'Crimson Pro', serif;
            font-size: 24px;
            color: var(--secondary);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border);
            font-weight: 600;
        }

        /* Education Box */
        .education-box {
            background: linear-gradient(135deg, #FFF5E6 0%, #FFE8E8 100%);
            border-left: 5px solid var(--primary);
            border-radius: 12px;
            padding: 24px;
            margin: 24px 0;
            box-shadow: var(--shadow-sm);
        }

        .education-box img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 16px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .education-box h3 {
            color: var(--primary);
            font-size: 18px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        .education-box p, .education-box ul {
            font-size: 15px;
            color: var(--text-dark);
            line-height: 1.7;
            margin-bottom: 12px;
        }

        .education-box ul {
            padding-left: 20px;
        }

        .education-box li {
            margin-bottom: 8px;
        }

        /* Question */
        .question-container {
            margin: 28px 0;
        }

        .question-text {
            font-size: 17px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 16px;
            line-height: 1.5;
        }

        .question-note {
            font-size: 14px;
            color: var(--text-medium);
            font-style: italic;
            margin-bottom: 12px;
        }

        /* Options */
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            display: flex;
            align-items: flex-start;
            padding: 16px 20px;
            background: var(--bg-cream);
            border: 2px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .option:hover {
            background: #FFE8E8;
            border-color: var(--primary);
            transform: translateX(4px);
        }

        .option.selected {
            background: linear-gradient(135deg, #FFE8E8 0%, #FFD4D4 100%);
            border-color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .option.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .option input[type="checkbox"],
        .option input[type="radio"] {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            margin-top: 2px;
            cursor: pointer;
            accent-color: var(--primary);
            flex-shrink: 0;
        }

        .option label {
            cursor: pointer;
            font-size: 15px;
            color: var(--text-dark);
            flex: 1;
        }

        /* Navigation Buttons */
        .navigation {
            display: flex;
            gap: 16px;
            justify-content: space-between;
            margin-top: 32px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 14px 32px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            box-shadow: var(--shadow-sm);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: var(--bg-white);
            color: var(--secondary);
            border: 2px solid var(--secondary);
        }

        .btn-secondary:hover:not(:disabled) {
            background: var(--secondary);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Completion Screen */
        .completion-screen {
            text-align: center;
            padding: 60px 30px;
        }

        .completion-screen h2 {
            font-family: 'Crimson Pro', serif;
            font-size: 36px;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .completion-screen .icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .impact-message {
            background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
            padding: 24px;
            border-radius: 12px;
            margin: 24px 0;
            border-left: 5px solid var(--success);
        }

        .impact-message h3 {
            color: var(--success);
            font-size: 20px;
            margin-bottom: 12px;
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .loading-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: var(--shadow-lg);
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Alert Box */
        .alert {
            padding: 16px 20px;
            border-radius: 12px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .alert-success {
            background: #E8F5E9;
            color: #2E7D32;
            border-left: 4px solid #4CAF50;
        }

        .alert-error {
            background: #FFEBEE;
            color: #C62828;
            border-left: 4px solid #F44336;
        }

        /* Responsive */
        @media (max-width: 768px) {
            body {
                padding: 12px;
            }

            .section-container {
                padding: 24px 20px;
            }

            .header {
                padding: 30px 20px;
            }

            .navigation {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ============================================
        // CONFIGURATION - UPDATE THIS URL
        // ============================================
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwcKwM_gojKhelMhGFQNqVdCzQdBpqDo9AFx441vIHTJTnziS3nkN6ivstbDf2EnaQ/exec
';
        // Instructions to get this URL are at the bottom of this file
        // ============================================

        // Survey Data Structure
        const surveyData = {
            sections: [
                {
                    id: 'section1',
                    title: 'About You',
                    description: 'These questions help us understand women from different backgrounds.',
                    questions: [
                        {
                            id: 'q1',
                            text: 'What is your age group?',
                            type: 'single',
                            options: [
                                'Under 30 years',
                                '30-39 years',
                                '40-49 years',
                                '50-59 years',
                                '60 years or older'
                            ]
                        },
                        {
                            id: 'q2',
                            text: 'Where do you live?',
                            type: 'single',
                            options: [
                                'Village / rural area',
                                'Small town',
                                'City / urban area'
                            ]
                        },
                        {
                            id: 'q3',
                            text: 'What type of family do you live in?',
                            type: 'single',
                            options: [
                                'Nuclear family - only husband and/or children',
                                'Joint family - with in-laws or other relatives',
                                'Alone or without family',
                                'Other'
                            ]
                        }
                    ]
                },
                {
                    id: 'section2',
                    title: 'Community Perceptions & Barriers',
                    description: 'We want to understand what stops women from getting breast check-ups.',
                    questions: [
                        {
                            id: 'q4',
                            text: 'What are the reasons women in your community might delay breast check-ups?',
                            note: '(SELECT ALL THAT APPLY)',
                            type: 'multiple',
                            options: [
                                'Shyness/embarrassment about examination',
                                'Fear of bad news or cancer',
                                'Family/community judgment',
                                'Cost concerns',
                                'Too busy with family duties',
                                'Don\'t think it\'s serious/urgent',
                                'Nothing stops them'
                            ]
                        },
                        {
                            id: 'q5',
                            text: 'In your community, a woman who gets an early breast check-up is mostly seen as:',
                            type: 'single',
                            options: [
                                'Responsible and smart',
                                'Overly worried',
                                'Subject to gossip/judgment',
                                'People don\'t really notice or care'
                            ]
                        }
                    ]
                },
                {
                    id: 'section3',
                    title: 'Understanding Breast Examination',
                    educationBox: {
                        title: 'üìò What is Breast Examination?',
                        image: 'images/breast-examination-steps.png',
                        content: [
                            'Breast examination means checking your breasts to find any lumps, changes, or problems early. Early detection helps in better treatment.',
                            '',
                            'üè† Self-Check at Home: Check your own breasts once a month for new lumps, changes in size/shape, skin changes, or nipple changes. Takes only 5 minutes.',
                            '',
                            'üè• Doctor Examination: Done by a trained health worker. Recommended once every 1-3 years for women 25-40, and yearly for women above 40.',
                            '',
                            '‚ö†Ô∏è When to see a doctor: If you find a lump, nipple discharge, skin changes, or pain that doesn\'t go away.',
                            '',
                            'üìç Where to get checked: PHC, CHC, Government hospital, Health camps, or ask your ASHA worker.'
                        ]
                    },
                    questions: [
                        {
                            id: 'q6',
                            text: 'Some women say they know roughly how their breasts usually look and feel. Which statement is closest to you?',
                            type: 'single',
                            options: [
                                'Yes, I know well how my breasts normally look and feel',
                                'I know somewhat, but not completely',
                                'I don\'t know how my breasts normally are',
                                'I have never paid attention to this',
                                'I feel uncomfortable thinking/talking about this'
                            ]
                        },
                        {
                            id: 'q7',
                            text: 'Have you been told by your health worker/doctor to have regular breast exams?',
                            type: 'single',
                            options: ['Yes', 'No', 'Not sure']
                        },
                        {
                            id: 'q8',
                            text: 'When it comes to breast examination by doctor, which is true for you?',
                            type: 'single',
                            options: [
                                'I have had a breast exam and go regularly as recommended',
                                'I delay them sometimes due to family needs',
                                'I delay them often due to family responsibilities',
                                'I never had a breast exam',
                                'I rarely go for check-ups'
                            ]
                        },
                        {
                            id: 'q9',
                            text: 'Doctors say that when breast changes are found early, many women can be treated and return to regular life. Does this encourage you to get regular checkups?',
                            type: 'single',
                            options: [
                                'Yes, this motivates me to get regular checkups',
                                'Yes, but I face challenges in accessing healthcare',
                                'Yes, but I need more information about where to go',
                                'I\'m not sure yet',
                                'No, I have other concerns',
                                'I already get regular checkups'
                            ]
                        },
                        {
                            id: 'q10',
                            text: 'More than 8 out of 10 women whose breast changes are found early can be treated successfully. Would knowing this encourage you to seek medical help if you noticed a change?',
                            type: 'single',
                            options: [
                                'Yes, definitely',
                                'Yes, but I don\'t know where to go',
                                'Yes, but I face barriers to accessing care',
                                'I\'m not sure',
                                'No',
                                'I would seek help regardless'
                            ]
                        }
                    ]
                },
                {
                    id: 'section4',
                    title: 'Information Sources',
                    questions: [
                        {
                            id: 'q11',
                            text: 'Where do you usually get information about women\'s breast health?',
                            note: '(SELECT ALL THAT APPLY)',
                            type: 'multiple',
                            options: [
                                'ASHA / ANM / community health worker',
                                'Government doctor / private doctor',
                                'TV or radio',
                                'WhatsApp / social media',
                                'Family and friends',
                                'Religious or community leaders',
                                'I rarely receive information on this topic'
                            ]
                        }
                    ]
                },
                {
                    id: 'section5',
                    title: 'Understanding Breast Cancer',
                    educationBox: {
                        title: 'üìò About Breast Cancer',
                        image: 'images/farming-analogy.jpg',
                        content: [
                            'Breast cancer is an abnormal growth in the breast. Sometimes you CAN\'T feel a lump yourself - that\'s why regular check-ups are important.',
                            '',
                            'üåæ Think of it like a crop disease:',
                            '‚Ä¢ Early detection = treat a few plants, save the whole field',
                            '‚Ä¢ Late detection = disease spreads, harder to treat',
                            '',
                            '‚úÖ Good news: When found early, most women can be treated and return to normal life. Early treatment is simpler, shorter, and more successful.',
                            '',
                            '‚ö†Ô∏è Don\'t wait for obvious signs. Regular check-ups BEFORE you notice anything wrong.'
                        ]
                    },
                    questions: [
                        {
                            id: 'q12',
                            text: 'Before today, did you know that breast cancer can be treated successfully if found early?',
                            type: 'single',
                            options: [
                                'Yes, I already knew this',
                                'I heard something similar but wasn\'t sure',
                                'No, this is new information for me'
                            ]
                        },
                        {
                            id: 'q13',
                            text: 'At what age should most women start getting regular breast check-ups?',
                            type: 'single',
                            options: [
                                'Age 20-29',
                                'Age 30-39',
                                'Age 40-49 (correct for most women)',
                                'Age 50 or older',
                                'I don\'t know'
                            ]
                        },
                        {
                            id: 'q14',
                            text: 'Which of these changes should be checked by a doctor?',
                            note: '(Choose up to 3 most important)',
                            type: 'multiple',
                            maxSelections: 3,
                            options: [
                                'A new lump in the breast or underarm',
                                'Change in breast size or shape',
                                'Nipple discharge (not breast milk)',
                                'Skin puckering or dimpling',
                                'Any of the above - all should be checked',
                                'I\'m not sure which changes are important'
                            ]
                        },
                        {
                            id: 'q15',
                            text: 'What is a mammogram?',
                            type: 'single',
                            options: [
                                'An X-ray picture of the breast (correct)',
                                'A blood test',
                                'A surgery to remove a lump',
                                'An ultrasound scan',
                                'I don\'t know'
                            ]
                        },
                        {
                            id: 'q16',
                            text: 'Some women believe "If there\'s no pain, it can\'t be serious." Is this true or false?',
                            type: 'single',
                            options: [
                                'False - breast cancer is often painless in early stages (correct)',
                                'True - serious problems always cause pain',
                                'I\'m not sure'
                            ]
                        },
                        {
                            id: 'q17',
                            text: 'Who is most at risk for breast cancer?',
                            type: 'single',
                            options: [
                                'Only women with family history',
                                'Only older women over 60',
                                'Any woman can get it, but risk increases with age (correct)',
                                'Only women who have had children',
                                'I don\'t know'
                            ]
                        }
                    ]
                },
                {
                    id: 'section6',
                    title: 'Personal History & Access',
                    questions: [
                        {
                            id: 'q18',
                            text: 'Have you been diagnosed with breast cancer or have family history of cancer?',
                            type: 'single',
                            options: ['Yes', 'No', 'Don\'t know']
                        },
                        {
                            id: 'q19',
                            text: 'Have you ever had a mammogram?',
                            type: 'single',
                            options: [
                                'Yes, within the past 2 years',
                                'Yes, more than 2 years ago',
                                'No, never',
                                'I don\'t know what a mammogram is until now'
                            ]
                        },
                        {
                            id: 'q20',
                            text: 'If you never had a mammogram, why not?',
                            type: 'single',
                            conditional: { questionId: 'q19', showIf: ['No, never'] },
                            options: [
                                'Too expensive',
                                'Don\'t know where to go',
                                'No doctor recommended it',
                                'Too busy',
                                'Feel embarrassed',
                                'I\'m too young / don\'t need it yet'
                            ]
                        },
                        {
                            id: 'q21',
                            text: 'If there was a FREE women\'s health camp with female doctors in your area, would you go?',
                            type: 'single',
                            options: [
                                'Yes, definitely - I would make time to go',
                                'Yes, if someone could come with me',
                                'Yes, but only if my family approves',
                                'Maybe - depends on the day and time',
                                'No, I would not feel comfortable going'
                            ]
                        },
                        {
                            id: 'q22',
                            text: 'If you noticed a small concern about your breast, what would be your FIRST step?',
                            type: 'single',
                            options: [
                                'Go directly to PHC/CHC/government hospital',
                                'Contact ASHA worker or ANM for help',
                                'Tell a family member and decide together',
                                'Wait a few days to see if it goes away',
                                'I don\'t know what I would do',
                                'I didn\'t know before, but now I would go to a health facility'
                            ]
                        }
                    ]
                },
                {
                    id: 'section7',
                    title: 'Knowledge & Sharing',
                    educationBox: {
                        title: 'üìò What To Do If You Find A Change',
                        image: 'images/action-steps.png',
                        content: [
                            'Step 1: Don\'t panic - most changes are NOT cancer',
                            'Step 2: See a doctor within 2-3 weeks',
                            'Step 3: Go to PHC/CHC/hospital/mobile camp',
                            'Step 4: Ask for a female doctor if available',
                            '',
                            '‚úÖ You have the RIGHT to:',
                            '‚Ä¢ Clear information',
                            '‚Ä¢ Privacy and respect',
                            '‚Ä¢ Ask questions',
                            '‚Ä¢ Bring a family member if you want'
                        ]
                    },
                    questions: [
                        {
                            id: 'q23',
                            text: 'If you wanted a routine breast check-up (even without problems), would you know where to go?',
                            type: 'single',
                            options: [
                                'Yes, I know exactly which health facility to visit',
                                'I know I should go to a health center but need to learn the process',
                                'I would ask ASHA worker/ANM to help me',
                                'I would ask family/friends for guidance',
                                'I don\'t know what to do',
                                'I learned from this survey where to go'
                            ]
                        },
                        {
                            id: 'q24',
                            text: 'Would you share information from this survey with other women?',
                            type: 'single',
                            options: [
                                'Yes, definitely',
                                'Yes, but only with close family or friends',
                                'Maybe',
                                'Probably not',
                                'I am not sure'
                            ]
                        }
                    ]
                }
            ]
        };

        function App() {
            const [currentSectionIndex, setCurrentSectionIndex] = useState(0);
            const [answers, setAnswers] = useState({});
            const [isComplete, setIsComplete] = useState(false);
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [submitError, setSubmitError] = useState(null);
            const [submitSuccess, setSubmitSuccess] = useState(false);
            const [startTime] = useState(new Date());
            const [responseId] = useState(Date.now().toString());

            const currentSection = surveyData.sections[currentSectionIndex];
            const totalQuestions = surveyData.sections.reduce((sum, section) => sum + section.questions.length, 0);
            const answeredQuestions = Object.keys(answers).length;
            const progress = (answeredQuestions / totalQuestions) * 100;

            const handleAnswer = (questionId, value, isMultiple = false) => {
                if (isMultiple) {
                    const currentAnswers = answers[questionId] || [];
                    const newAnswers = currentAnswers.includes(value)
                        ? currentAnswers.filter(v => v !== value)
                        : [...currentAnswers, value];
                    setAnswers({ ...answers, [questionId]: newAnswers });
                } else {
                    setAnswers({ ...answers, [questionId]: value });
                }
            };

            const isQuestionVisible = (question) => {
                if (!question.conditional) return true;
                const conditionalAnswer = answers[question.conditional.questionId];
                return question.conditional.showIf.includes(conditionalAnswer);
            };

            const canProceed = () => {
                return currentSection.questions
                    .filter(isQuestionVisible)
                    .every(q => answers[q.id] && (Array.isArray(answers[q.id]) ? answers[q.id].length > 0 : true));
            };

            const handleNext = () => {
                if (currentSectionIndex < surveyData.sections.length - 1) {
                    setCurrentSectionIndex(currentSectionIndex + 1);
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                } else {
                    handleSubmit();
                }
            };

            const handlePrevious = () => {
                if (currentSectionIndex > 0) {
                    setCurrentSectionIndex(currentSectionIndex - 1);
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            };

            const handleSubmit = async () => {
                setIsSubmitting(true);
                setSubmitError(null);

                const endTime = new Date();
                const duration = Math.round((endTime - startTime) / 1000 / 60); // minutes

                // Prepare data for Google Sheets
                const submissionData = {
                    responseId: responseId,
                    timestamp: endTime.toISOString(),
                    date: endTime.toLocaleDateString(),
                    time: endTime.toLocaleTimeString(),
                    duration: duration,
                    ...Object.fromEntries(
                        Object.entries(answers).map(([key, value]) => [
                            key,
                            Array.isArray(value) ? value.join('; ') : value
                        ])
                    )
                };

                try {
                    const response = await fetch(GOOGLE_SCRIPT_URL, {
                        method: 'POST',
                        mode: 'no-cors', // Google Apps Script requires this
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(submissionData)
                    });

                    // With no-cors, we can't read the response, so assume success
                    setSubmitSuccess(true);
                    setIsComplete(true);
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                } catch (error) {
                    console.error('Submission error:', error);
                    setSubmitError('Unable to submit. Please check your internet connection and try again.');
                } finally {
                    setIsSubmitting(false);
                }
            };

            if (isSubmitting) {
                return (
                    <div className="loading-overlay">
                        <div className="loading-content">
                            <div className="spinner"></div>
                            <h3>Submitting Your Responses...</h3>
                            <p style={{ color: 'var(--text-medium)', marginTop: '12px' }}>
                                Please wait while we save your answers
                            </p>
                        </div>
                    </div>
                );
            }

            if (isComplete) {
                return (
                    <div className="app-container">
                        <div className="section-container completion-screen">
                            <div className="icon">üôè</div>
                            <h2>Thank You!</h2>
                            <p style={{ fontSize: '18px', color: 'var(--text-medium)', marginBottom: '30px' }}>
                                You Have Just Helped Save Lives
                            </p>

                            {submitSuccess && (
                                <div className="alert alert-success">
                                    <span>‚úì</span>
                                    <span>Your responses have been recorded successfully!</span>
                                </div>
                            )}

                            <div className="impact-message">
                                <h3>üìò YOUR CONTRIBUTION MATTERS</h3>
                                <p>By completing this questionnaire, you have taken an important step in:</p>
                                <ul style={{ textAlign: 'left', marginTop: '16px' }}>
                                    <li>‚úÖ Increasing breast cancer awareness in your community</li>
                                    <li>‚úÖ Helping us understand the real barriers women face</li>
                                    <li>‚úÖ Enabling us to design better health programs that work for YOU</li>
                                    <li>‚úÖ Contributing to early detection and saving lives</li>
                                </ul>
                                <p style={{ marginTop: '20px' }}><strong>Your honest answers will help us:</strong></p>
                                <ul style={{ textAlign: 'left', marginTop: '12px' }}>
                                    <li>‚Ä¢ Bring health camps closer to where you live</li>
                                    <li>‚Ä¢ Create awareness programs that address YOUR concerns</li>
                                    <li>‚Ä¢ Train health workers to support women better</li>
                                    <li>‚Ä¢ Make breast cancer screening more accessible and comfortable</li>
                                </ul>
                                <p style={{ marginTop: '20px' }}><strong>Together, we can achieve our bigger goal:</strong></p>
                                <ul style={{ textAlign: 'left', marginTop: '12px' }}>
                                    <li>üéØ Detect breast cancer earlier</li>
                                    <li>üéØ Save millions of women's lives</li>
                                    <li>üéØ Reduce fear and stigma around breast health</li>
                                    <li>üéØ Build healthier, stronger communities</li>
                                </ul>
                            </div>

                            <div className="education-box" style={{ marginTop: '30px' }}>
                                <h3>üìû Need More Information?</h3>
                                <p><strong>Contact your nearest health facility:</strong></p>
                                <ul>
                                    <li>üìç Primary Health Center (PHC)</li>
                                    <li>üìç Community Health Center (CHC)</li>
                                    <li>üìç Government Hospital</li>
                                    <li>üìç Ask your ASHA worker or ANM</li>
                                </ul>
                            </div>

                            <p style={{ fontSize: '20px', fontWeight: '600', color: 'var(--primary)', marginTop: '30px' }}>
                                üí° Remember: Early detection saves lives. Share this knowledge with other women.
                            </p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="app-container">
                    <div className="header">
                        <h1>Community Breast Health & Wellbeing Survey</h1>
                        <p>Understanding women's experiences, beliefs and needs around breast health</p>
                        <div className="stats">
                            <span className="stat-badge">‚úì 24 Questions</span>
                            <span className="stat-badge">‚úì 5-7 Minutes</span>
                            <span className="stat-badge">‚úì Anonymous</span>
                            <span className="stat-badge">‚úì Confidential</span>
                        </div>
                    </div>

                    <div className="progress-container">
                        <div className="progress-info">
                            <span>Section {currentSectionIndex + 1} of {surveyData.sections.length}</span>
                            <span>{answeredQuestions} of {totalQuestions} questions answered</span>
                        </div>
                        <div className="progress-bar">
                            <div className="progress-fill" style={{ width: `${progress}%` }}></div>
                        </div>
                    </div>

                    {submitError && (
                        <div className="alert alert-error">
                            <span>‚ö†</span>
                            <span>{submitError}</span>
                        </div>
                    )}

                    <div className="section-container">
                        <h2 className="section-header">
                            Section {currentSectionIndex + 1}: {currentSection.title}
                        </h2>
                        {currentSection.description && (
                            <p style={{ fontSize: '15px', color: 'var(--text-medium)', marginBottom: '24px', fontStyle: 'italic' }}>
                                {currentSection.description}
                            </p>
                        )}

                        {currentSection.educationBox && (
                            <div className="education-box">
                                <h3>{currentSection.educationBox.title}</h3>
                                {currentSection.educationBox.image && (
                                    <img 
                                        src={currentSection.educationBox.image} 
                                        alt={currentSection.educationBox.title}
                                        onError={(e) => { e.target.style.display = 'none'; }}
                                    />
                                )}
                                {currentSection.educationBox.content.map((line, idx) => (
                                    line === '' ? <br key={idx} /> : <p key={idx}>{line}</p>
                                ))}
                            </div>
                        )}

                        {currentSection.questions.map((question, qIndex) => {
                            if (!isQuestionVisible(question)) return null;

                            return (
                                <div key={question.id} className="question-container">
                                    <div className="question-text">
                                        {qIndex + 1}. {question.text}
                                    </div>
                                    {question.note && (
                                        <div className="question-note">{question.note}</div>
                                    )}

                                    <div className="options-container">
                                        {question.options.map((option, optIndex) => {
                                            const isSelected = question.type === 'multiple'
                                                ? (answers[question.id] || []).includes(option)
                                                : answers[question.id] === option;

                                            const isDisabled = question.maxSelections && 
                                                question.type === 'multiple' &&
                                                (answers[question.id] || []).length >= question.maxSelections &&
                                                !isSelected;

                                            return (
                                                <div 
                                                    key={optIndex} 
                                                    className={`option ${isSelected ? 'selected' : ''} ${isDisabled ? 'disabled' : ''}`}
                                                    onClick={() => !isDisabled && handleAnswer(question.id, option, question.type === 'multiple')}
                                                >
                                                    <input
                                                        type={question.type === 'multiple' ? 'checkbox' : 'radio'}
                                                        checked={isSelected}
                                                        onChange={() => {}}
                                                        disabled={isDisabled}
                                                    />
                                                    <label>{option}</label>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            );
                        })}

                        <div className="navigation">
                            <button 
                                className="btn btn-secondary"
                                onClick={handlePrevious}
                                disabled={currentSectionIndex === 0}
                            >
                                ‚Üê Previous Section
                            </button>
                            <button 
                                className="btn btn-primary"
                                onClick={handleNext}
                                disabled={!canProceed()}
                            >
                                {currentSectionIndex === surveyData.sections.length - 1 
                                    ? 'Submit Survey ‚úì' 
                                    : 'Next Section ‚Üí'}
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>

<!-- 
============================================
SETUP INSTRUCTIONS FOR GOOGLE SHEETS BACKEND
============================================

STEP 1: Create a new Google Sheet
1. Go to https://sheets.google.com
2. Create a new blank spreadsheet
3. Name it "Breast Health Survey Responses"

STEP 2: Set up the Apps Script
1. In your Google Sheet, go to Extensions > Apps Script
2. Delete any code in the editor
3. Copy and paste the code from the companion file "google-apps-script.js"
4. Click Save (üíæ icon)
5. Click Deploy > New deployment
6. Click "Select type" ‚öôÔ∏è > Web app
7. Set:
   - Execute as: Me
   - Who has access: Anyone
8. Click Deploy
9. Copy the Web app URL (it will look like: https://script.google.com/macros/s/ABC123.../exec)
10. Click "Done"

STEP 3: Update this HTML file
1. Find line 285 above: const GOOGLE_SCRIPT_URL = 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE';
2. Replace 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE' with your copied URL
3. Save this file

STEP 4: Test
1. Open this HTML file in a browser
2. Complete the survey
3. Submit
4. Check your Google Sheet - data should appear!

TROUBLESHOOTING:
- If data doesn't appear, check the Apps Script logs (View > Logs in Apps Script editor)
- Make sure you clicked "Deploy" not just "Save"
- The URL should end with /exec not /dev
- Wait 10-15 seconds after first deployment for changes to propagate

For detailed setup guide with screenshots, see the README file.
-->
